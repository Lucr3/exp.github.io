<div id="choropleth-chart">
    <div class="h5 pt-3 fw-bold text-center" style="color: var(--text-color);">
        One Country, Different Prices: Yemen's Divided Economy
    </div>
    <div class="h6 pt-2 mb-4 fw-bold text-center" style="color: var(--text-muted);">
        How the conflict fragmented the national market, creating unsustainable food-cost zones.
    </div>

    <div class="mb-3 text-center">
        <div class="d-inline-block align-middle mx-2">
            <label for="choropleth-commodity" class="form-label fw-semibold mb-0 me-2">Commodity:</label>
            <select id="choropleth-commodity" class="form-select form-select-sm d-inline-block"
                style="width: auto;"></select>
        </div>
    </div>

    <!-- Controls - matching SymbolMap style -->
    <div class="mb-3 text-center">
        <div class="d-inline-block align-middle mx-2">
            <button id="choropleth-play-btn" class="btn btn-primary btn-sm me-3">
                <i class="bi bi-play-fill"></i> Play
            </button>
            <label for="choropleth-speed-slider" class="form-label fw-semibold mb-0 me-2">Speed:</label>
            <input type="range" id="choropleth-speed-slider" class="form-range d-inline-block"
                style="width: 200px; vertical-align: middle" min="200" max="2000" value="1000" step="100" />
            <span id="choropleth-speed-value" class="fw-semibold ms-2">1.0s</span>
        </div>
    </div>

    <div class="mb-3 text-center">
        <div class="d-inline-block align-middle mx-2">
            <label for="choropleth-year-slider" class="form-label fw-semibold mb-0">Year:</label>
            <input type="range" id="choropleth-year-slider" class="form-range d-inline-block"
                style="width: 300px; vertical-align: middle" min="0" max="0" value="0" step="1" />
            <span id="choropleth-year-slider-value" class="fw-semibold ms-2">—</span>
        </div>
    </div>

    <div class="choropleth-wrapper" style="position: relative; width: 100%; max-width: 100%; overflow: hidden;">
        <svg id="choropleth-svg" viewBox="0 0 960 500" preserveAspectRatio="xMidYMid meet"
            style="display: block; width: 100%;"></svg>
        <div id="choropleth-zoom-controls"
            style="position: absolute; left: 10px; bottom: 20px; z-index: 10; background-color: var(--card-background); border: 1px solid var(--border-color); border-radius: 8px; padding: 8px; box-shadow: 0 2px 8px var(--shadow-color); display: flex;">
            <div class="d-flex flex-column gap-2">
                <button id="choropleth-zoom-in" class="btn btn-sm btn-outline-primary"
                    title="Zoom In"><strong>+</strong></button>
                <button id="choropleth-zoom-out" class="btn btn-sm btn-outline-primary"
                    title="Zoom Out"><strong>−</strong></button>
                <button id="choropleth-zoom-reset" class="btn btn-sm btn-outline-secondary"
                    title="Reset View"><strong>⟲</strong></button>
            </div>
        </div>
    </div>

    <div class="card-narrow">
        <p class="mt-2 mb-0 pt-2 small text-start card-note">
            This map doesn't just track prices: it traces the invisible 
            boundaries of a fractured economy. The dark red areas mark the 
            governorates where inflation has hit hardest, transforming basic
            goods—like beans or wheat—into luxury products. The color contrast
             between the different regions tells a story of two Yemens: areas
              where the market is still holding up and others where purchasing
               power has been eroded by currency devaluation and supply difficulties.
        </p>
    </div>
</div>